.\" Manpage for gentoo-oam
.TH man 8 "10 May 2015" "1.0" "gentoo-expire man page"

.SH NAME

oam expire \- prune old log file sets written by gentoo-oam

.SH SYNOPSIS

.B
oam expire [-h] [<logdir> <keeplogs> <dryrun>]

.SH DESCRIPTION

.B oam expire
is typically called from cron.

It will tar and compress all but the last N sets of logfiles to the /var/log/oam/old directory.

A set is a directory where the logfiles for one day are written (e.g. /var/log/oam/20150711).

The installation installs a script into /etc/cron.daily.

The expiry implementation is provided by: '/usr/sbin/oam expire'

See the OAM_KEEPLOGS setting to configure how many log file sets are kept.

.SH SYSTEM SETTINGS
.P
These settings are configured in /etc/gentoo-oam.conf, and are loaded into the environment by
the cron script (/etc/cron.daily/gentoo-oam), prior to running the expiry script.

To respect the /etc/gentoo-oam.conf settings when running '/usr/sbin/oam expire' at the command
line, source the config file prior to running the script; e.g.:

.PP
.RS 0
     $ source /etc/gentoo-oam.conf; /usr/sbin/oam expire

.P
.TP
.BI OAM_KEEPLOGS
The number of sync/update log sets to keep. Defaults to 10
.TP
.BI OAM_LOGDIR
The location where gentoo-oam logs will be sent/stored. Defaults to /var/log/oam

.SH FILES

.TP
.BI /etc/gentoo-oam.conf
gentoo-oam system configuration
.TP
.BI /var/log/oam/expire.log
expiry actions are logged to this file (by action of the cron script - otherwise logging is sent
to the console)

.SH BUGS

None

.SH SEE ALSO

oam-flow(8), oam-watch(8), emaint(1), emerge(1), eclean(1), glsa-check(1), qcheck(1), logrotate(8),
eix(1), genlop(1), ts(1), multitail(1)

.SH AUTHOR

Paul Healy

.SH COPYRIGHT

GNU GENERAL PUBLIC LICENSE Version 2
